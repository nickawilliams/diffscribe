.TH DIFFSCRIBE 1 "May 2025" "diffscribe" "User Commands"
.SH NAME
diffscribe \- LLM-assisted Git commit helper
.SH SYNOPSIS
.B diffscribe
.RI [ options ]
.RI [ prefix ]
.SH DESCRIPTION
.B diffscribe
inspects the staged changes in the current Git repository and asks an LLM for
commit message suggestions.  It prints each suggestion on its own line and is
designed to plug into shell completion so
.B git commit -m "" TAB
can offer LLM-backed completions that honor whatever prefix you typed.
.PP
Any optional
.I prefix
argument restricts the suggestions to messages that begin with that text (for
example a Conventional Commit prefix).  When the CLI is invoked from shell
completion the text already entered after
.B git commit -m
is automatically forwarded as the prefix.
.SH OPTIONS
.TP
\fB--config\fR \fIFILE\fR
Read configuration from the given file instead of searching for
.I diffscribe.{yaml,json,toml}
files.
.TP
\fB--llm-api-key\fR \fIKEY\fR
API key used to authenticate with the configured LLM provider.  Overrides the
values discovered in configuration files and environment variables.
.TP
\fB--llm-provider\fR \fINAME\fR
LLM provider identifier.  Defaults to \fBopenai\fR.
.TP
\fB--llm-model\fR \fINAME\fR
Model identifier supplied to the LLM provider.  Defaults to
\fBgpt-4o-mini\fR.
.TP
\fB--llm-base-url\fR \fIURL\fR
Base URL for the compatible chat completions API.
.TP
\fB--system-prompt\fR \fITEXT\fR
Override the system prompt template used by diffscribe.
.TP
\fB--user-prompt\fR \fITEXT\fR
Override the user prompt template.
.TP
\fB--format\fR \fITEXT\fR
Describe the desired commit message format (for example the Conventional
Commit summary style).  Templates from completion integrations are rendered
with this text.
.TP
\fB--llm-temperature\fR \fIFLOAT\fR
Temperature to request from the LLM.  Defaults to \fB1.0\fR.
.TP
\fB--quantity\fR \fIN\fR
Number of suggestions to request.  Defaults to \fB5\fR.
.TP
\fB--llm-max-completion-tokens\fR \fIN\fR
Upper bound on the completion tokens requested from the provider
(\fB0\fR uses the provider default).
.TP
\fB-h\fR, \fB--help\fR
Show help for the command and exit.
.SH ENVIRONMENT
.TP
\fBDIFFSCRIBE_API_KEY\fR, \fBOPENAI_API_KEY\fR
Provide the API key for the LLM provider.  \fBDIFFSCRIBE_API_KEY\fR takes
precedence.
.TP
\fBDIFFSCRIBE_STATUS\fR
Set to \fB0\fR to disable the \fIloadingâ€¦\fR status indicator that appears in
some shell integrations.
.TP
\fBDIFFSCRIBE_STASH_COMMIT\fR
When set to a Git object ID, diffscribe inspects that stash entry instead of
the staged work tree.  This is used by the completion helpers while they hide
untracked files inside a temporary stash.
.SH FILES
.TP
\fB$XDG_CONFIG_HOME/diffscribe/.diffscribe*\fR
Highest-precedence configuration files.  If \fB$XDG_CONFIG_HOME\fR is unset,
\fB$HOME/.config/diffscribe\fR is used.
.TP
\fB$HOME/.diffscribe*\fR
User-level configuration.
.TP
\fB./.diffscribe*\fR
Per-repository overrides.  Each file only overrides the keys that it defines;
values cascade from higher-precedence locations down to the project.
.SH EXAMPLES
.TP
\fBdiffscribe\fR
Print five commit message suggestions for the currently staged changes.
.TP
\fBdiffscribe "feat: add"\fR
Generate suggestions that begin with the provided prefix.
.TP
\fBgit commit -m ""\fR
Type your desired prefix between the quotes, then press TAB to request inline
suggestions from diffscribe via the shell completion scripts.
.SH SEE ALSO
.BR git (1)
